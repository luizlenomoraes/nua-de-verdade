<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nua e de Verdade: A Jornada Interativa</title>
    
    <!-- Link para o Manifesto do PWA -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Meta tags para tema e comportamento do PWA em dispositivos Apple -->
    <meta name="theme-color" content="#FFF1F2"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Nua e Verdade">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Estilização da fonte e scroll */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: #FFF1F2; /* Cor de fundo principal */
        }
        h1, h2, h3, h4 {
            font-family: 'Cormorant Garamond', serif;
        }
        /* Efeito de máquina de escrever para o título */
        .typewriter h1 {
            overflow: hidden;
            border-right: .15em solid #A78BFA; /* Cor do cursor */
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .1em;
            animation: 
                typing 3.5s steps(40, end),
                blink-caret .75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #A78BFA; }
        }
    </style>
</head>
<body class="text-stone-700">

    <!-- Container Principal -->
    <div class="container mx-auto max-w-3xl p-4 md:p-8">

        <!-- Seção de Abertura -->
        <header id="inicio" class="text-center min-h-screen flex flex-col justify-center items-center">
             <img src="icons/icon-192x192.png" alt="Logo Nua e de Verdade" class="w-24 h-24 mb-6 rounded-3xl shadow-lg">
            <div class="typewriter mb-4">
                <h1 class="text-4xl md:text-6xl font-bold text-violet-600">Nua e de Verdade</h1>
            </div>
            <p class="text-lg md:text-xl text-stone-600 mb-8 max-w-xl">Como se sentir desejável mesmo quando sua autoestima te sabota.</p>
            <button id="startButton" class="bg-violet-500 hover:bg-violet-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 duration-300 ease-in-out">
                Iniciar a Jornada
            </button>
        </header>

        <!-- Container da Jornada (Capítulos) -->
        <main id="jornada" class="hidden">
            
            <!-- Barra de Progresso Fixa -->
            <div class="sticky top-0 z-10 py-4 bg-rose-50/80 backdrop-blur-sm">
                <h2 class="text-2xl font-bold text-center text-violet-500 mb-2">Sua Jornada</h2>
                <div class="w-full bg-violet-200 rounded-full h-2.5">
                    <div id="progressBar" class="bg-violet-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <!-- Capítulos Gerados Dinamicamente -->
            <div id="capitulosContainer" class="space-y-16 mt-8">
                <!-- Os capítulos serão inseridos aqui pelo JavaScript -->
            </div>
            
            <!-- Mensagem de Conclusão -->
            <section id="conclusao" class="hidden text-center p-8 bg-white rounded-2xl shadow-xl mt-16">
                 <h2 class="text-3xl md:text-4xl font-bold text-violet-600 mb-4">Parabéns por concluir sua jornada!</h2>
                 <p class="text-lg text-stone-600 mb-6">Este é um grande passo na redescoberta da sua força e do seu prazer. Lembre-se: você não é um conserto, é uma casa pronta para ser habitada e amada. Continue nua e, acima de tudo, de verdade.</p>
                 <i data-lucide="heart-handshake" class="mx-auto text-violet-500 w-16 h-16"></i>
            </section>

        </main>
    </div>

    <script>
        // --- Registro do Service Worker (essencial para o PWA) ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }

        // --- CONTEÚDO COMPLETO DO EBOOK ---
        const ebookData = [
            {
                capitulo: 1,
                titulo: "O Espelho Como Arma",
                conteudo: [
                    "Você se olha e o que vê? Uma lista de defeitos, um checklist de imperfeições. O espelho, que deveria ser um portal para o autoconhecimento, virou seu carrasco. Ele reflete não apenas sua imagem, mas o peso de cada crítica que você já internalizou.",
                    "Sua nudez virou um campo de batalha. Cada centímetro do seu corpo é julgado, condenado. E quando o desejo bate à porta, você o recebe com uma armadura de vergonha. Como se entregar de verdade quando uma parte de você quer se esconder?"
                ],
                exercicio: {
                    titulo: "O Olhar que Dói, Cura",
                    descricao: "Vá para frente do espelho, nua. Respire fundo três vezes. Apenas se olhe, sem a pressa de se vestir ou a urgência de julgar. Observe uma parte do seu corpo que você costuma criticar. Ao invés do xingamento, agradeça. 'Obrigada, barriga, por guardar minhas histórias.' Faça isso por 5 minutos.",
                    tipo: "reflexao",
                    placeholder: "Escreva aqui como se sentiu durante o exercício. Quais emoções surgiram?"
                }
            },
            {
                capitulo: 2,
                titulo: "Sexo em Posição Fetal (Mesmo de Pernas Abertas)",
                conteudo: [
                    "Você está ali, de corpo presente, mas sua mente está em outro lugar. 'Será que ele está gostando?', 'Essa posição esconde minha barriga?'. A entrega vira performance. O prazer vira uma meta a ser batida. Você se encolhe por dentro, mesmo que seu corpo esteja aberto.",
                    "Essa desconexão é a mais cruel das traições: a traição contra si mesma. Você nega seu próprio prazer em nome de uma aprovação que talvez nunca venha, ou que, se vier, soará vazia."
                ],
                exercicio: {
                    titulo: "O Corpo que Não Representa",
                    descricao: "Sozinha, em um lugar seguro, experimente posições que te deixam insegura. Fique de quatro, coloque a perna para cima. Sinta o desconforto. Respire nele. Seu corpo não é uma estátua para ser admirada, é um instrumento para ser sentido. O que você sente quando se liberta da necessidade de 'parecer bonita'?",
                    tipo: "reflexao",
                    placeholder: "Descreva as sensações e pensamentos que surgiram ao experimentar essas posições."
                }
            },
            {
                capitulo: 3,
                titulo: "A Vergonha que Se Cala no Travesseiro",
                conteudo: [
                    "O sexo acaba. Os corpos se separam. E no silêncio, um sentimento incômodo te visita. Uma sensação de 'foi só isso?'. Uma vergonha por não ter sentido o que 'deveria', por ter fingido, por ter se sentido inadequada. Você afunda o rosto no travesseiro para abafar esse grito silencioso.",
                    "Essa vergonha é o resquício de todas as vezes que você se diminuiu. É a conta que chega por ter se colocado em segundo plano."
                ],
                exercicio: {
                    titulo: "O Travesseiro que Confessa",
                    descricao: "Pegue um caderno ou use o espaço abaixo. Após sua próxima relação sexual (ou lembrando da última), escreva livremente sobre o que sentiu depois. Sem filtros. O travesseiro não julga. Nomear o sentimento é o primeiro passo para entendê-lo.",
                    tipo: "diario",
                    placeholder: "Confesse ao seu diário... O que você realmente sentiu quando tudo acabou?"
                }
            },
            {
                capitulo: 4,
                titulo: "Reprogramando o Prazer",
                conteudo: [
                    "Sua sensualidade foi sequestrada. Por ex-parceiros, pela mídia, por comentários maldosos. Ela foi condicionada a responder a estímulos que não são seus. É hora do resgate. Reprogramar o prazer é um ato de rebeldia. É reivindicar seu corpo como seu.",
                    "Isso acontece com rituais. Com toques intencionais. Com a decisão consciente de se dar prazer, de descobrir o que te acende, sem depender do outro para acionar o interruptor."
                ],
                exercicio: {
                    titulo: "Diário de Reprogramação",
                    descricao: "Durante uma semana, dedique 10 minutos por dia para se tocar. Não precisa ser sexual. Pode ser passar um creme, sentir a textura de um tecido na pele, um autoabraço. Anote no seu diário o que você descobriu. 'Gosto do toque firme nas minhas coxas.' 'Arrepio quando passo a mão no meu pescoço.'",
                    tipo: "diario",
                    placeholder: "Anote aqui suas descobertas diárias sobre seu próprio corpo e seus prazeres."
                }
            },
            {
                capitulo: 5,
                titulo: "Nua, Mas de Pé",
                conteudo: [
                    "Vulnerabilidade não é fraqueza, é coragem. Mas existe uma diferença entre se jogar no chão e se mostrar por inteiro, de pé, sustentando o próprio corpo, as próprias verdades. Nua, mas de pé, significa dizer: 'Este é o meu corpo, com suas histórias. Esta sou eu. Se quiser, venha. Se não, a porta está aberta.'",
                    "É parar de pedir desculpas por existir, por sentir, por desejar. É ocupar seu espaço no mundo e na cama."
                ],
                exercicio: {
                    titulo: "A Nudez em Pé",
                    descricao: "Escolha uma música que te faça sentir poderosa. Nua, em frente ao espelho, dance. Não para seduzir um outro, mas para seduzir a si mesma. Sinta seus músculos, seu movimento, sua força. Veja a beleza na sua potência, não na sua pose.",
                    tipo: "reflexao",
                    placeholder: "Como foi dançar para si mesma? Que poder você sentiu em seu corpo?"
                }
            },
             {
                capitulo: 6,
                titulo: "A Nova Promessa: Você Não É Conserto",
                conteudo: [
                    "A indústria da beleza, a cultura do 'seja sua melhor versão', tudo isso lucra com a sua insegurança. Eles te vendem a ideia de que você é um projeto de reforma eterno. Mas você não é. Você é uma casa pronta. Talvez precise de uma pintura nova, de abrir as janelas, mas a estrutura está aí. Perfeita.",
                    "A promessa não é de se consertar, mas de se habitar. De viver em cada cômodo do seu corpo com amor e aceitação."
                ],
                exercicio: {
                    titulo: "A Carta de Nudez",
                    descricao: "Escreva uma carta para si mesma. Um manifesto. Uma declaração de amor e de trégua. Sele o acordo de que você irá se tratar com mais gentileza, que irá honrar seus desejos e que nunca mais irá se encolher. Esta é a sua nova promessa.",
                    tipo: "carta",
                    placeholder: "Querida eu..."
                }
            }
        ];

        // --- LÓGICA DA APLICAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.getElementById('startButton');
            const inicioSection = document.getElementById('inicio');
            const jornadaSection = document.getElementById('jornada');
            const capitulosContainer = document.getElementById('capitulosContainer');
            const progressBar = document.getElementById('progressBar');
            const conclusaoSection = document.getElementById('conclusao');

            let currentChapter = 0;
            const totalChapters = ebookData.length;

            function createChapterHTML(chapterData, index) {
                const isLocked = index > 0;
                return `
                    <section id="capitulo-${chapterData.capitulo}" class="p-6 md:p-8 bg-white rounded-2xl shadow-xl transition-opacity duration-1000 ${isLocked ? 'opacity-50 pointer-events-none' : ''}">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl md:text-3xl font-bold text-violet-600">${chapterData.titulo}</h3>
                            <span class="text-sm font-semibold bg-violet-100 text-violet-700 py-1 px-3 rounded-full">Capítulo ${chapterData.capitulo}</span>
                        </div>
                        <div class="prose max-w-none prose-stone prose-p:text-stone-600 prose-p:leading-relaxed">
                            ${chapterData.conteudo.map(p => `<p>${p}</p>`).join('')}
                        </div>
                        
                        <div class="mt-8 pt-6 border-t-2 border-dashed border-violet-200">
                            <div class="flex items-center gap-3">
                                <i data-lucide="sparkles" class="text-violet-500"></i>
                                <h4 class="text-xl font-bold text-stone-800">${chapterData.exercicio.titulo}</h4>
                            </div>
                            <p class="text-stone-600 mt-2 mb-4">${chapterData.exercicio.descricao}</p>
                            <textarea id="exercicio-input-${chapterData.capitulo}" class="w-full h-40 p-4 bg-rose-50 border border-violet-200 rounded-lg focus:ring-2 focus:ring-violet-400 focus:border-violet-400 transition" placeholder="${chapterData.exercicio.placeholder}"></textarea>
                            <div class="flex justify-end items-center gap-4 mt-4">
                               <button class="save-button text-sm text-violet-600 hover:underline" data-capitulo="${chapterData.capitulo}">Salvar reflexão</button>
                               <button class="complete-button bg-violet-500 hover:bg-violet-600 text-white font-semibold py-2 px-6 rounded-full transition-transform transform hover:scale-105" data-capitulo="${chapterData.capitulo}">Concluir Capítulo</button>
                            </div>
                        </div>
                    </section>
                `;
            }

            function loadSavedData() {
                ebookData.forEach(chapter => {
                    const savedText = localStorage.getItem(`exercicio_cap_${chapter.capitulo}`);
                    if (savedText) {
                        const textarea = document.getElementById(`exercicio-input-${chapter.capitulo}`);
                        if(textarea) textarea.value = savedText;
                    }
                });
            }
            
            startButton.addEventListener('click', () => {
                inicioSection.classList.add('hidden');
                jornadaSection.classList.remove('hidden');
                currentChapter = 1;
                updateProgressBar();
            });

            function attachEventListeners() {
                document.querySelectorAll('.complete-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const chapterNum = parseInt(e.target.dataset.capitulo);
                        if (chapterNum < totalChapters) {
                            unlockNextChapter(chapterNum);
                        } else {
                            showConclusion();
                        }
                    });
                });

                 document.querySelectorAll('.save-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const chapterNum = parseInt(e.target.dataset.capitulo);
                        const textarea = document.getElementById(`exercicio-input-${chapterNum}`);
                        localStorage.setItem(`exercicio_cap_${chapterNum}`, textarea.value);
                        
                        e.target.textContent = 'Salvo!';
                        e.target.classList.add('text-green-600');
                        setTimeout(() => {
                            e.target.textContent = 'Salvar reflexão';
                            e.target.classList.remove('text-green-600');
                        }, 2000);
                    });
                });
            }

            function unlockNextChapter(completedChapterNum) {
                currentChapter = completedChapterNum + 1;
                const nextChapterElement = document.getElementById(`capitulo-${currentChapter}`);
                
                if (nextChapterElement) {
                    nextChapterElement.classList.remove('opacity-50', 'pointer-events-none');
                    nextChapterElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                updateProgressBar();
            }

            function showConclusion() {
                currentChapter = totalChapters + 1;
                conclusaoSection.classList.remove('hidden');
                conclusaoSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                updateProgressBar();
            }
            
            function updateProgressBar() {
                const progress = Math.min(((currentChapter - 1) / totalChapters) * 100, 100);
                progressBar.style.width = `${progress}%`;
            }
            
            function initializeApp() {
                capitulosContainer.innerHTML = ebookData.map(createChapterHTML).join('');
                loadSavedData();
                attachEventListeners();
                lucide.createIcons();
            }
            
            initializeApp();
        });
    </script>
</body>
</html>

